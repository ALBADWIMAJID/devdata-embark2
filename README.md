# DevData Embark

Full-stack document ingestion and processing web app. Upload JSON, PDF, or TXT files, track processing status, view previews, and manage documents from a dashboard.

## What This Project Does

- Uploads documents and validates file types.
- Stores metadata in SQLite (Prisma) and files in `server/uploads/`.
- Simulates processing and embedding with background delays.
- Provides lists, details, and stats via a REST API.
- Can serve the built frontend from the Express server when `dist/` exists.

## User Flow

1. Upload a file (JSON, PDF, TXT).
2. The document appears as Processing.
3. Status updates to Processed and then Embedded.
4. Open the details page to see preview and embedding info.
5. Delete a document when needed.

## Pages and Routes

- `/` - Landing page
- `/upload` - Upload UI
- `/documents` - List + dashboard stats
- `/document/:id` - Document details
- `/pricing`, `/documentation`, `/api-reference`, `/examples`, `/blog`, `/about`, `/contact`, `/privacy`, `/terms` - Static pages

## Tech Stack

- Frontend: Vite, React, TypeScript, Tailwind CSS, shadcn-ui
- Backend: Express (TypeScript), Prisma (SQLite)

## Repo Structure

- `src/` - React frontend
- `server/` - Express API + Prisma schema
- `server/prisma/` - Prisma schema and migrations

## Running Locally

Detailed steps are in `RUNNING_AR.md` (AR) and `RUNNING_RU.md` (RU).

### Development (2 terminals)

Terminal 1:
```sh
npm install
npm run dev
```

Terminal 2:
```sh
cd server
npm install
npx prisma generate
npx prisma migrate deploy
npm run dev
```

Open: `http://localhost:8080`

### Production-like (server serves the built frontend)

```sh
npm install
npm run build
cd server
npm install
npx prisma generate
npx prisma migrate deploy
npm run dev
```

Open: `http://localhost:3001`

## Environment

Frontend API base URL (optional). If not set, the frontend calls `/api` on the same origin:
```
VITE_API_URL=http://localhost:3001
```

Server port (optional):
```
PORT=3001
```

## API Endpoints

- `POST /api/upload` - Upload file (multipart form, field: `file`)
- `GET /api/documents` - List documents
- `GET /api/document/:id` - Document details
- `DELETE /api/delete/:id` - Delete document
- `GET /api/stats` - Dashboard stats

## Database

Document fields:
- `id`, `name`, `filename`, `fileType`, `size`
- `processed`, `embedding`, `vectorId`
- `preview`, `createdAt`

SQLite database is stored in `server/prisma/` and generated by Prisma migrations.

## Notes

- Runtime files are ignored: `server/uploads/` and `server/prisma/*.db`.
- Vite dev server proxies `/api` to `http://localhost:3001`.

## Troubleshooting

- Prisma issues: run `npx prisma generate` and `npx prisma migrate deploy` in `server/`.
- If the frontend cannot reach the API, set `VITE_API_URL` and restart `npm run dev`.
